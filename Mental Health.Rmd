---
title: "Mental Health"
author: 'Cohort B: Alvaro Chinchayan, Leighton Li, Andrey Lifar, Yoki Liu, Yue Ping, Sherry Zuo'
subtitle: Capstone Project
date: "2/27/2020"
output:
  pdf_document:
    latex_engine: xelatex
---

Our main goal is to answer questions for:  
What's the overview of people's mental health problem?   
Can you predict whether a patient should be treated of his/her mental illness or not according to the value obtained based on our data?   
Is there a correlation between mental health and whether job lets them take them break/ alow them to work from home/remote worker?  
What can we get for the tweets data?   
```{r setup, include=FALSE}
library(tidyverse)
library(knitr)
library(ggplot2)
library(dplyr)
library(scales)
library(lubridate)
library(data.table)
library(skimr)
library(rtweet)
library(tidytext)
library(maps)
```
Our first part will focus on the [OSMI Mental Health in Tech Surveys data](https://osmihelp.org/research)  
We merged 2016-2019 data into a new dataset by python, more code could see in the Mental_Health.ipynb file. We will use the merged dataset "mental_health" to do an overview of the mental illness    
We will do supervised machine learning focus on the year 2014 data  

***
Data Loading  
```{r}
#import data
data<-read_csv("~/Desktop/mental_health.csv")
data2014<-read_csv("~/Desktop/2014.csv")
```
***
Data Cleaning
```{r}
#remove first column since it's just the numbers of row
data<-data[,2:29]
```
```{r}
skim(data)
```
```{r}
#rename columns
names(data2014)[5:27]<-c("state","self_employed","family_history","awareness_of_treatment", "interfere","company_size","remote","tech_company","mh_benefits","awareness_mh_benefits","mh_discuss","mh_resources", "anonymity_protected", "medical_leave_easy","mh_negative_consequence_flag","ph_negative_consequence_flag","mh_disscuss_coworker","mh_disscuss_supervisor","interview_mh_bringup", "interview_ph_bringup","mh_serious_ph","witness_mh_nc","comments")
```
```{r}
skim(data2014)
```
```{r}
#make a copy of our data
maindata<-data2014
#drop variables "Timestamp", “Country”, “comments” just to make our lives easier.
maindata<-subset(maindata, select = -c(1,4,27))
```
```{r}
names(maindata)[1:2]<-c("age","gender")
```
```{r}
data.table(maindata)
```

```{r}
skim(maindata)
```
```{r}
#make word into lowercases in column gender
maindata$gender<-str_to_lower(maindata$gender)
#build gender group
male_str = c("male", "m", "male-ish", "maile", "mal", "male (cis)", "make", "male ", "man","msle", "mail", "malr","cis man", "Cis Male", "cis male")
trans_str = c("trans-female", "something kinda male?", "queer/she/they", "non-binary","nah", "all", "enby", "fluid", "genderqueer", "androgyne", "agender", "male leaning androgynous", "guy (-ish) ^_^", "trans woman", "neuter", "female (trans)", "queer", "ostensibly male, unsure what that really means")          
female_str = c("cis female", "f", "female", "woman",  "femake", "female ","cis-female/femme", "female (cis)", "femail")
#replace details
maindata$gender <- ifelse(maindata$gender %in% male_str, "M",ifelse(maindata$gender %in% female_str,"F",ifelse(maindata$gender %in% trans_str,"T",NA)))
```
```{r}
#we want to focus on the US
maindata<-maindata[!is.na(maindata$state),]
```
```{r}
skim(maindata)
```
```{r}
#remove all NAs
maindata<-na.omit(maindata)
```


